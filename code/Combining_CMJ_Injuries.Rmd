---
title: "combining_cmj_injury"
output: html_document
date: "2025-10-10"
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE, message = FALSE, warning = FALSE)
```

```{r setup, include=FALSE}
# loading necessary libraries
library(dplyr)
library(readr)
library(lubridate)
```


# 1. Loading CMJ Data and Analyzing Structure Before Merging
```{r setup, include=FALSE}
# reading in the cmj data
cmj <- read_csv("CMJ_All_De_Identified.csv")

# previewing to check
head(cmj)
```

```{r}
# checking variable names and dimension
names(cmj)
dim(cmj)

# checking which date variable is the one i need to be looking at
class(cmj$performed_at_local)
class(cmj$performed_at_utc)

# looking at performed_at_utc
cmj_date_check <- cmj %>%
  select(performed_at_utc)
head(cmj_date_check)
```

The date variable we need is "performed_at_utc" but we are going to rename it for clarity.
```{r}
# renaming performed_at_utc to JumpDate
cmj <- cmj %>%
  rename(JumpDate = performed_at_utc)

# checking to see if it worked properly
head(cmj$JumpDate)
```

We know there are several variables with many NA values from previewing the data. We will now filter those out before merging. 
```{r}
# checking for NA values
colSums(is.na(cmj))
```

Many of our columns have all or mostly NA values. We will remove this from the dataset now before merging. 
```{r}
cmj <- cmj[, colSums(is.na(cmj)) <= 14000] # removing all columns where there is more than 14000 NA values as this is about half the observations

# checking new dimensions
dim(cmj)
```

After filtering out columns with over 14,000 NA values, we went from 311 variables to 93: a much easier dataset to merge. We'll now check for any unnecessary variables which will include any metrics not worthy of including in our analysis. 
```{r}
# seeing the remaining variable names
names(cmj)

# checking the purpose/structure of some unknown variables
head(cmj$athlete_id)
head(cmj$testType_name)
head(cmj$id)
```

